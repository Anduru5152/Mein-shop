<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mein Shop</title>
<style>
body { font-family: Arial, sans-serif; margin:0; padding:0; background:#f9f9f9; }
h1,h2 { text-align:center; margin:10px 0; }
.btn { padding:12px 20px; margin:5px; background:#28a745; color:white; border:none; border-radius:5px; cursor:pointer; font-size:1em; }
.btn:hover { background:#218838; }
.linkBlue { color:#007bff; cursor:pointer; text-decoration:underline; }
input { width:250px; padding:8px; margin:5px 0; border:1px solid #ccc; border-radius:5px; }
.box { background:white; padding:20px; border-radius:8px; border:1px solid #ccc; margin:10px; text-align:center; }

#startScreen,#loginScreen,#registerScreen { display:flex; flex-direction:column; align-items:center; justify-content:center; height:100vh; }

#shop { display:none; max-width:1100px; margin:auto; padding:20px; }
.produkte { display:flex; flex-wrap:wrap; gap:20px; justify-content:center; }
.produkt { border:1px solid #ccc; border-radius:8px; width:30%; padding:10px; text-align:center; background:white; cursor:pointer; transition:0.3s; }
.produkt:hover { box-shadow:0 0 10px #888; }
.produkt img { width:100%; border-radius:5px; }
.name { font-weight:bold; margin:10px 0 5px; text-align:left; }
.preis { color:green; font-size:1.2em; margin-bottom:10px; text-align:left; }

#cart { position:fixed; top:50%; transform:translateY(-50%); width:60px; height:60px; background:white; border-radius:50%; border:3px solid orange; display:flex; align-items:center; justify-content:center; cursor:grab; z-index:1000; transition:left 0.2s, right 0.2s; font-size:1.5em; }
#cart span { position:absolute; top:-5px; right:-5px; background:orange; color:white; width:20px; height:20px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:0.8em; }

#productDetail,#cartOverlay { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:white; z-index:2000; overflow-y:auto; padding:20px; }

#productDetail img,#cartOverlay img { width:100%; max-width:600px; display:block; margin:10px auto; border-radius:8px; transition:transform 0.5s ease; }
#productDetail .detailHeader,#cartOverlay .detailHeader { display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; }
#productDetail .preis,#cartOverlay .preis { font-size:1.5em; text-align:center; margin:10px 0; }
#productDetail button,#cartOverlay button { display:block; margin:10px auto; }
.slideContainer { position:relative; overflow:hidden; }
.slideInner { display:flex; transition:transform 0.5s ease; }
.slideInner img { flex-shrink:0; width:100%; }

#cartOverlay .produkte { display:flex; flex-wrap:wrap; gap:20px; justify-content:center; }
#cartOverlay .produkt { width:30%; border:1px solid #ccc; border-radius:8px; padding:10px; text-align:center; background:white; }
#cartOverlay .btn { margin-top:5px; }

#searchBar { width:300px; padding:8px; margin:10px auto; display:block; border:1px solid #ccc; border-radius:5px; }

</style>
</head>
<body>

<!-- Startbildschirm -->
<div id="startScreen">
  <h1>Willkommen!</h1>
  <div>Bist du zum ersten Mal hier?</div>
  <button class="btn" onclick="showRegister()">Registrieren</button>
  <div>Du hast bereits ein Konto?</div>
  <button class="btn" onclick="showLogin()">Anmelden</button>
  <div class="linkBlue" onclick="enterShop()">Ohne Anmeldung fortfahren</div>
</div>

<!-- Registrieren -->
<div id="registerScreen" style="display:none;">
  <h2>Registrieren</h2>
  <div class="box">
    <input type="text" id="regVorname" placeholder="Vorname"><br>
    <input type="text" id="regNachname" placeholder="Nachname"><br>
    <input type="text" id="regAdresse" placeholder="StraÃŸe, Hausnummer, PLZ"><br>
    <input type="email" id="regEmail" placeholder="Email-Adresse"><br>
    <input type="password" id="regPass" placeholder="Passwort"><br>
    <input type="password" id="regPass2" placeholder="Passwort wiederholen"><br>
    <button class="btn" onclick="registerUser()">Registrieren</button>
    <div class="linkBlue" onclick="showLogin()">Bereits ein Konto? Anmelden</div>
  </div>
</div>

<!-- Anmelden -->
<div id="loginScreen" style="display:none;">
  <h2>Anmelden</h2>
  <div class="box">
    <input type="email" id="loginEmail" placeholder="Email-Adresse"><br>
    <input type="password" id="loginPass" placeholder="Passwort"><br>
    <button class="btn" onclick="loginUser()">Anmelden</button>
    <div class="linkBlue" onclick="showRegister()">Noch kein Konto? Registrieren</div>
  </div>
</div>

<!-- Shop -->
<div id="shop">
  <h1>Mein Shop</h1>
  <input type="text" id="searchBar" placeholder="Suche Produkte..." oninput="searchProducts()">
  <div class="produkte" id="produkteContainer">
    <!-- Produkte werden per JS eingefÃ¼gt -->
  </div>
</div>

<!-- Warenkorb-Button -->
<div id="cart">ðŸ›’<span id="cartCount">0</span></div>

<!-- Detailseite -->
<div id="productDetail">
  <div class="detailHeader">
    <div id="detailName"></div>
    <button class="btn" onclick="closeDetail()">ZurÃ¼ck</button>
  </div>
  <div class="slideContainer">
    <div class="slideInner" id="slideInner"></div>
    <button style="position:absolute;top:50%;left:10px;" onclick="prevSlide()">â€¹</button>
    <button style="position:absolute;top:50%;right:10px;" onclick="nextSlide()">â€º</button>
  </div>
  <div class="preis" id="detailPrice"></div>
  <button class="btn" id="detailBuyBtn" onclick="addToCartCurrent()">In Warenkorb legen</button>
</div>

<!-- Warenkorb Overlay -->
<div id="cartOverlay">
  <div class="detailHeader">
    <h2>Warenkorb</h2>
    <button class="btn" onclick="closeCart()">Weiter shoppen</button>
  </div>
  <div class="produkte" id="cartProducts"></div>
  <div style="text-align:center; margin-top:20px;">
    <button class="btn" onclick="buyAll()">Alle Produkte kaufen</button>
    <div id="totalPrice" style="margin-top:10px; font-size:1.2em;"></div>
  </div>
</div>

<script>
let products = [
  {name:"Produkt 1",preis:29.99,bilder:["https://via.placeholder.com/600x400?text=Produkt+1+Bild+1","https://via.placeholder.com/600x400?text=Produkt+1+Bild+2","https://via.placeholder.com/600x400?text=Produkt+1+Bild+3"]},
  {name:"Produkt 2",preis:19.99,bilder:["https://via.placeholder.com/600x400?text=Produkt+2+Bild+1","https://via.placeholder.com/600x400?text=Produkt+2+Bild+2","https://via.placeholder.com/600x400?text=Produkt+2+Bild+3"]},
  {name:"Produkt 3",preis:39.99,bilder:["https://via.placeholder.com/600x400?text=Produkt+3+Bild+1","https://via.placeholder.com/600x400?text=Produkt+3+Bild+2","https://via.placeholder.com/600x400?text=Produkt+3+Bild+3"]},
  {name:"Produkt 4",preis:59.99,bilder:["https://via.placeholder.com/600x400?text=Produkt+4+Bild+1","https://via.placeholder.com/600x400?text=Produkt+4+Bild+2","https://via.placeholder.com/600x400?text=Produkt+4+Bild+3"]},
  {name:"Produkt 5",preis:49.99,bilder:["https://via.placeholder.com/600x400?text=Produkt+5+Bild+1","https://via.placeholder.com/600x400?text=Produkt+5+Bild+2","https://via.placeholder.com/600x400?text=Produkt+5+Bild+3"]},
  {name:"Produkt 6",preis:24.99,bilder:["https://via.placeholder.com/600x400?text=Produkt+6+Bild+1","https://via.placeholder.com/600x400?text=Produkt+6+Bild+2","https://via.placeholder.com/600x400?text=Produkt+6+Bild+3"]}
];

let cart = [];
let currentProductIndex = 0;
let currentSlide = 0;

function showRegister(){document.getElementById("startScreen").style.display="none";document.getElementById("registerScreen").style.display="flex";}
function showLogin(){document.getElementById("startScreen").style.display="none";document.getElementById("loginScreen").style.display="flex";}
function enterShop(){document.getElementById("startScreen").style.display="none";document.getElementById("shop").style.display="block";}
function closeDetail(){document.getElementById("productDetail").style.display="none";}
function closeCart(){document.getElementById("cartOverlay").style.display="none";}

function registerUser(){enterShop();}
function loginUser(){enterShop();}

function renderProducts(container,arr){container.innerHTML="";arr.forEach((p,i)=>{let div=document.createElement("div");div.className="produkt";div.dataset.index=i;div.onclick=()=>showDetail(i);div.innerHTML=`<img src="${p.bilder[0]}" alt="${p.name}"><div class="name">${p.name}</div><div class="preis">${p.preis.toFixed(2)} â‚¬</div><button onclick="addToCart(${i}); event.stopPropagation()">In Warenkorb legen</button>`;container.appendChild(div);});}
function showDetail(i){currentProductIndex=i;currentSlide=0;let p=products[i];document.getElementById("productDetail").style.display="block";document.getElementById("detailName").textContent=p.name;document.getElementById("detailPrice").textContent=p.preis.toFixed(2)+" â‚¬";let inner=document.getElementById("slideInner");inner.innerHTML="";p.bilder.forEach(b=>{let img=document.createElement("img");img.src=b;inner.appendChild(img);});updateSlide();}

function addToCart(i){cart.push(products[i]);updateCartCount();}
function addToCartCurrent(){cart.push(products[currentProductIndex]);updateCartCount();}
function updateCartCount(){document.getElementById("cartCount").textContent=cart.length;}
function showCart(){document.getElementById("cartOverlay").style.display="block";let container=document.getElementById("cartProducts");renderProducts(container,cart);updateTotal();}
function buyAll(){if(cart.length==0)return;alert("Alle Produkte gekauft!");cart=[];updateCartCount();closeCart();}
function updateTotal(){let total=cart.reduce((sum,p)=>sum+p.preis,0);document.getElementById("totalPrice").textContent="Gesamt: "+total.toFixed(2)+" â‚¬";}

document.getElementById("cart").onclick=showCart;

function prevSlide(){if(currentSlide>0){currentSlide--;updateSlide();}}
function nextSlide(){if(currentSlide<products[currentProductIndex].bilder.length-1){currentSlide++;updateSlide();}}
function updateSlide(){let inner=document.getElementById("slideInner");inner.style.transform=`translateX(-${currentSlide*100}%)`;}

// Render Shop Produkte
renderProducts(document.getElementById("produkteContainer"),products);

// Suche
function searchProducts(){let val=document.getElementById("searchBar").value.toLowerCase();let filtered=products.filter(p=>p.name.toLowerCase().includes(val));renderProducts(document.getElementById("produkteContainer"),filtered);}
</script>
</body>
</html>
